<!DOCTYPE html>
<html lang="ir">
	<head>
		<link rel="stylesheet" href="styles.css">
		<link rel="icon" type="image/x-icon" href="/home/aka/Downloads/chess.webp">
		<title>	Chess Game </title>
	</head>
	<body>
		<div id="h2ka"> N Queen Chess </div>
		<div class="background">
			<div class="controls">
				<label>Board size (N): <input id="n" type="number" value="8" min="1" /></label>
    			<button id="build">Build</button>
			</div>
		</div>
		<div>
			<input type="number" id="nqueen-number" name="nqueen-number"> </input><br>
			<button id="btn1"> Click To Send</button><br>
			<script>
				const btn = document.getElementById("btn1");
				btn.addEventListener("click",function(){
					const inputValue = document.getElementById("nqueen-number").value;
					SendToBackend(inputValue);
				});
				async function SendToBackend(nqueenNumber){
				    const xhr = new XMLHttpRequest();
				    xhr.open("POST", "http://localhost:8000/solve");
				    xhr.setRequestHeader("Content-Type", "application/json");
				    const body = JSON.stringify({
				        number: Number(nqueenNumber)
				    });
				    xhr.onload = () => {
						ClearElement("h2ka");
				        if (xhr.readyState == 4 && xhr.status == 200) {
							res = JSON.parse(xhr.responseText);
							list = res["solution"];
							const container = document.getElementById("h2ka");
							for (x in list){
								const nodeItem = document.createElement("span");
								nodeItem.innerHTML = list[x];
								container.appendChild(nodeItem);
							}
				        } else {
				            console.log(`Error: ${xhr.status}`);
				        }
				    };
				    xhr.send(body);
				}
				function ClearElement(elementID){
					document.getElementById(elementID).innerHTML = "";
				}
				const container = document.getElementById("h2ka");
				const newDiv = document.createElement("s");
				newDiv.className = 'sd';
				newDiv.style.setProperty('--n',5);
				container.appendChild(newDiv);
			</script>
		</div>
	</body>
</html>
